/* === ANIMATION TIMELINE ===
0-2s: Coffee meeting
2-4s: Rocket flies with trail
4-6s: Planning (2 seconds)
6-9s: Runner carries plan
9-10s: Dev team appears
10-12s: Dev builds product
12-13s: Product appears
13-21s: Van journey
21-24s: Delivery complete
24s: LOOP RESTART
*/

/* Rocket flying animation - FORWARD DIRECTION */
@keyframes rocket-fly {
  0% {
    left: 15vw;
    bottom: 8px;
    opacity: 0;
    transform: rotate(0deg);
  }

  5% {
    opacity: 1;
  }

  95% {
    opacity: 1;
  }

  100% {
    left: 38vw;
    bottom: 18px;
    opacity: 0;
    transform: rotate(5deg);
  }
}

.anim-rocket {
  animation: rocket-fly 2s ease-in-out forwards;
  animation-delay: 2s;
}

/* Planning scene appears and STAYS FOR 2 SECONDS */
@keyframes plan-appear {
  0% {
    opacity: 0;
    transform: translateY(10px);
  }

  5% {
    opacity: 1;
    transform: translateY(0);
  }

  95% {
    opacity: 1;
    transform: translateY(0);
  }

  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

.anim-plan {
  animation: plan-appear 2s ease-out forwards;
  animation-delay: 4s;
}

/* Receiving arm wave */
@keyframes receiving-arm {

  0%,
  100% {
    transform: rotate(0deg);
  }

  50% {
    transform: rotate(-20deg);
  }
}

.anim-receiving-arm {
  transform-origin: 20px 25px;
  animation: receiving-arm 0.5s ease-in-out 2;
  animation-delay: 4.2s;
}

/* Runner animation */
@keyframes runner-move {
  0% {
    left: 38vw;
    opacity: 0;
  }

  5% {
    opacity: 1;
  }

  95% {
    opacity: 1;
  }

  100% {
    left: 65vw;
    opacity: 0;
  }
}

.anim-runner {
  animation: runner-move 3s ease-in-out forwards;
  animation-delay: 6s;
}

/* Running legs */
@keyframes legs-run {

  0%,
  100% {
    transform: rotate(0deg);
  }

  50% {
    transform: rotate(-25deg);
  }
}

.anim-legs-run {
  transform-origin: 26px 35px;
  animation: legs-run 0.3s ease-in-out infinite;
  animation-delay: 6s;
}

/* Dev team appears */
@keyframes dev-appear {
  0% {
    opacity: 0;
    transform: translateX(20px);
  }

  100% {
    opacity: 1;
    transform: translateX(0);
  }
}

.anim-dev {
  animation: dev-appear 0.5s ease-out forwards;
  animation-delay: 9s;
}

/* Typing animation */
@keyframes typing {

  0%,
  100% {
    transform: translateY(0);
  }

  50% {
    transform: translateY(-2px);
  }
}

.anim-typing {
  animation: typing 0.6s ease-in-out infinite;
  animation-delay: 9s;
}

@keyframes typing-bar {

  0%,
  100% {
    opacity: 1;
  }

  50% {
    opacity: 0.3;
  }
}

.anim-typing-bar {
  animation: typing-bar 1s ease-in-out infinite;
  animation-delay: 9s;
}

/* Product appears and DISAPPEARS when van loads */
@keyframes product-lifecycle {
  0% {
    opacity: 0;
    transform: scale(0.5) translateY(-20px);
  }

  5% {
    opacity: 1;
    transform: scale(1.1) translateY(-5px);
  }

  10% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }

  /* Stay visible until van arrives at dev team (13s + 20% of 8s = ~14.6s) */
  12.5% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }

  /* Disappear when van loads - van arrives at 20% (13s + 1.6s = 14.6s) */
  20% {
    opacity: 0;
    transform: scale(0.5) translateY(-10px);
  }

  100% {
    opacity: 0;
    transform: scale(0.5) translateY(-10px);
  }
}

.anim-product {
  animation: product-lifecycle 8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  animation-delay: 12s;
}

/* App appears on coffee shop table when van arrives */
@keyframes app-on-table {
  0% {
    opacity: 0;
    transform: scale(0.5) translateY(-10px);
  }

  /* Van reaches coffee shop at 75% of 8s = 6s, total time = 13s + 6s = 19s */
  74% {
    opacity: 0;
    transform: scale(0.5) translateY(-10px);
  }

  80% {
    opacity: 1;
    transform: scale(1.2) translateY(-3px);
  }

  85% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }

  /* Stay visible */
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.anim-app-table {
  animation: app-on-table 8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  animation-delay: 13s;
}

/* Van delivery animation with opacity control */
@keyframes van-delivery {
  0% {
    left: 100vw;
    opacity: 0;
  }

  2% {
    opacity: 1;
  }

  /* Drive to dev team */
  20% {
    left: 63vw;
    opacity: 1;
  }

  /* Wait and load product */
  35% {
    left: 63vw;
    opacity: 1;
  }

  /* Drive to coffee shop */
  75% {
    left: 5vw;
    opacity: 1;
  }

  /* Stay at coffee shop */
  95% {
    left: 5vw;
    opacity: 1;
  }

  /* Fade out before loop */
  100% {
    left: 5vw;
    opacity: 0;
  }
}

.anim-van {
  animation: van-delivery 8s ease-in-out forwards;
  animation-delay: 13s;
}

/* Wheel rotation - only when van is visible */
@keyframes wheels-rotate {
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
}

.anim-wheels {
  animation: wheels-rotate 0.5s linear infinite;
  animation-delay: 13s;
}

/* Hourglass animations */
@keyframes sand-top {

  0%,
  100% {
    d: path("M6 4 Q10 12 14 4 Z");
  }

  50% {
    d: path("M8 6 Q10 10 12 6 Z");
  }
}

.anim-sand-top {
  animation: sand-top 3s ease-in-out infinite;
}

@keyframes sand-bottom {
  0% {
    d: path("M8 16 Q12 24 8 24 L12 24 Q8 24 8 16");
  }

  50%,
  100% {
    d: path("M10 14 Q14 24 6 24 L14 24 Q6 24 10 14");
  }
}

.anim-sand-bottom {
  animation: sand-bottom 3s ease-in-out infinite;
}

@keyframes sand-stream {

  0%,
  100% {
    opacity: 1;
  }

  50% {
    opacity: 0.3;
  }
}

.anim-sand-stream {
  animation: sand-stream 0.5s ease-in-out infinite;
}

/* Arm sipping animation */
@keyframes arm-sip {

  0%,
  100% {
    transform: translateY(0);
  }

  50% {
    transform: translateY(-3px);
  }
}

.anim-arm-sip {
  animation: arm-sip 2s ease-in-out infinite;
}

/* === LOOP CONTROL === */
/* Add this class to the main container to loop the entire story */
@keyframes story-loop {

  0%,
  100% {
    opacity: 1;
  }
}

/* Apply infinite loop to restart the story */
.absolute.bottom-0.left-0.w-full {
  animation: story-loop 24s linear infinite;
}