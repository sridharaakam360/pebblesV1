/* === ANIMATION TIMELINE ===
0-2s: Coffee meeting
2-4s: Rocket flies with trail
4-6s: Planning (2 seconds)
6-9s: Runner carries plan
9-10s: Dev team appears
10-12s: Dev builds product
12-13s: Product appears
13-21s: Van journey
21-24s: Delivery complete
24s: LOOP RESTART
*/

/* Rocket flying animation - FORWARD DIRECTION (loops within 24s cycle) */
@keyframes rocket-fly {

  /* Hidden at start */
  0%,
  8.33% {
    left: 15vw;
    bottom: 10px;
    opacity: 0;
    transform: rotate(0deg);
  }

  /* Appear and fly (2s-4s = 8.33%-16.67%) */
  8.75% {
    opacity: 1;
  }

  16.25% {
    opacity: 1;
  }

  /* End position and fade */
  16.67% {
    left: 38vw;
    bottom: 18px;
    opacity: 0;
    transform: rotate(5deg);
  }

  /* Stay hidden for rest of cycle */
  100% {
    left: 38vw;
    bottom: 18px;
    opacity: 0;
    transform: rotate(5deg);
  }
}

.anim-rocket {
  animation: rocket-fly 24s ease-in-out infinite;
}

/* Planning scene appears and STAYS (4s-6s = 16.67%-25%) */
@keyframes plan-appear {

  /* Hidden at start */
  0%,
  16.67% {
    opacity: 0;
    transform: translateY(10px);
  }

  /* Appear */
  17.5% {
    opacity: 1;
    transform: translateY(0);
  }

  /* Stay visible */
  24.5% {
    opacity: 1;
    transform: translateY(0);
  }

  /* Fade out */
  25% {
    opacity: 0;
    transform: translateY(0);
  }

  /* Stay hidden */
  100% {
    opacity: 0;
    transform: translateY(0);
  }
}

.anim-plan {
  animation: plan-appear 24s ease-out infinite;
}

/* Receiving arm wave (happens at 4.2s = 17.5% of 24s) */
@keyframes receiving-arm {

  0%,
  17.5% {
    transform: rotate(0deg);
  }

  17.75% {
    transform: rotate(-20deg);
  }

  18% {
    transform: rotate(0deg);
  }

  18.25% {
    transform: rotate(-20deg);
  }

  18.5%,
  100% {
    transform: rotate(0deg);
  }
}

.anim-receiving-arm {
  transform-origin: 20px 25px;
  animation: receiving-arm 24s ease-in-out infinite;
}

/* Runner animation (6s-9s = 25%-37.5%) */
@keyframes runner-move {

  0%,
  25% {
    left: 38vw;
    opacity: 0;
  }

  26% {
    opacity: 1;
  }

  36.5% {
    opacity: 1;
  }

  37.5% {
    left: 65vw;
    opacity: 0;
  }

  100% {
    left: 65vw;
    opacity: 0;
  }
}

.anim-runner {
  animation: runner-move 24s ease-in-out infinite;
}

/* Running legs - continuous during runner movement */
@keyframes legs-run {

  0%,
  25% {
    transform: rotate(0deg);
  }

  25.625% {
    transform: rotate(-25deg);
  }

  26.25% {
    transform: rotate(0deg);
  }

  26.875% {
    transform: rotate(-25deg);
  }

  27.5% {
    transform: rotate(0deg);
  }

  28.125% {
    transform: rotate(-25deg);
  }

  28.75% {
    transform: rotate(0deg);
  }

  29.375% {
    transform: rotate(-25deg);
  }

  30% {
    transform: rotate(0deg);
  }

  30.625% {
    transform: rotate(-25deg);
  }

  31.25% {
    transform: rotate(0deg);
  }

  31.875% {
    transform: rotate(-25deg);
  }

  32.5% {
    transform: rotate(0deg);
  }

  33.125% {
    transform: rotate(-25deg);
  }

  33.75% {
    transform: rotate(0deg);
  }

  34.375% {
    transform: rotate(-25deg);
  }

  35% {
    transform: rotate(0deg);
  }

  35.625% {
    transform: rotate(-25deg);
  }

  36.25% {
    transform: rotate(0deg);
  }

  36.875% {
    transform: rotate(-25deg);
  }

  37.5%,
  100% {
    transform: rotate(0deg);
  }
}

.anim-legs-run {
  transform-origin: 26px 35px;
  animation: legs-run 24s ease-in-out infinite;
}

/* Dev team appears (9s = 37.5%) */
@keyframes dev-appear {

  0%,
  37.5% {
    opacity: 0;
    transform: translateX(20px);
  }

  39.5% {
    opacity: 1;
    transform: translateX(0);
  }

  100% {
    opacity: 1;
    transform: translateX(0);
  }
}

.anim-dev {
  animation: dev-appear 24s ease-out infinite;
}

/* Typing animation */
@keyframes typing {

  0%,
  100% {
    transform: translateY(0);
  }

  50% {
    transform: translateY(-2px);
  }
}

.anim-typing {
  animation: typing 0.6s ease-in-out infinite;
  animation-delay: 9s;
}

@keyframes typing-bar {

  0%,
  100% {
    opacity: 1;
  }

  50% {
    opacity: 0.3;
  }
}

.anim-typing-bar {
  animation: typing-bar 1s ease-in-out infinite;
  animation-delay: 9s;
}

/* Product appears and DISAPPEARS when van loads (12s-14.6s = 50%-60.8%) */
@keyframes product-lifecycle {

  0%,
  50% {
    opacity: 0;
    transform: scale(0.5) translateY(-20px);
  }

  51% {
    opacity: 1;
    transform: scale(1.1) translateY(-5px);
  }

  52% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }

  /* Stay visible until van arrives at dev team */
  60% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }

  /* Disappear when van loads */
  60.8% {
    opacity: 0;
    transform: scale(0.5) translateY(-10px);
  }

  100% {
    opacity: 0;
    transform: scale(0.5) translateY(-10px);
  }
}

.anim-product {
  animation: product-lifecycle 24s cubic-bezier(0.34, 1.56, 0.64, 1) infinite;
}

/* App appears on coffee shop table when van arrives (19s = 79.2%) */
@keyframes app-on-table {

  0%,
  78% {
    opacity: 0;
    transform: scale(0.5) translateY(-10px);
  }

  80% {
    opacity: 1;
    transform: scale(1.2) translateY(-3px);
  }

  82% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }

  /* Stay visible until end of cycle */
  99% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }

  /* Fade out before loop restart */
  100% {
    opacity: 0;
    transform: scale(0.5) translateY(-10px);
  }
}

.anim-app-table {
  animation: app-on-table 24s cubic-bezier(0.34, 1.56, 0.64, 1) infinite;
}

/* Van delivery animation (13s-21s = 54.17%-87.5%) */
@keyframes van-delivery {

  0%,
  54.17% {
    left: 100vw;
    opacity: 0;
  }

  55% {
    opacity: 1;
  }

  /* Drive to dev team (20% of journey) */
  60.8% {
    left: 63vw;
    opacity: 1;
  }

  /* Wait and load product */
  65.8% {
    left: 63vw;
    opacity: 1;
  }

  /* Drive to coffee shop */
  79.2% {
    left: 5vw;
    opacity: 1;
  }

  /* Stay at coffee shop */
  86.5% {
    left: 5vw;
    opacity: 1;
  }

  /* Fade out before loop */
  87.5% {
    left: 5vw;
    opacity: 0;
  }

  100% {
    left: 5vw;
    opacity: 0;
  }
}

.anim-van {
  animation: van-delivery 24s ease-in-out infinite;
}

/* Wheel rotation - only when van is visible (54.17%-87.5%) */
@keyframes wheels-rotate {

  0%,
  54.17% {
    transform: rotate(0deg);
  }

  55% {
    transform: rotate(360deg);
  }

  60.8% {
    transform: rotate(2160deg);
  }

  65.8% {
    transform: rotate(2160deg);
  }

  79.2% {
    transform: rotate(5040deg);
  }

  87.5%,
  100% {
    transform: rotate(5040deg);
  }
}

.anim-wheels {
  animation: wheels-rotate 24s linear infinite;
}

/* Hourglass animations */
@keyframes sand-top {

  0%,
  100% {
    d: path("M6 4 Q10 12 14 4 Z");
  }

  50% {
    d: path("M8 6 Q10 10 12 6 Z");
  }
}

.anim-sand-top {
  animation: sand-top 3s ease-in-out infinite;
}

@keyframes sand-bottom {
  0% {
    d: path("M8 16 Q12 24 8 24 L12 24 Q8 24 8 16");
  }

  50%,
  100% {
    d: path("M10 14 Q14 24 6 24 L14 24 Q6 24 10 14");
  }
}

.anim-sand-bottom {
  animation: sand-bottom 3s ease-in-out infinite;
}

@keyframes sand-stream {

  0%,
  100% {
    opacity: 1;
  }

  50% {
    opacity: 0.3;
  }
}

.anim-sand-stream {
  animation: sand-stream 0.5s ease-in-out infinite;
}

/* Arm sipping animation */
@keyframes arm-sip {

  0%,
  100% {
    transform: translateY(0);
  }

  50% {
    transform: translateY(-3px);
  }
}

.anim-arm-sip {
  animation: arm-sip 2s ease-in-out infinite;
}

/* === LOOP CONTROL === */
/* Add this class to the main container to loop the entire story */
@keyframes story-loop {

  0%,
  100% {
    opacity: 1;
  }
}

/* Apply infinite loop to restart the story */
.absolute.bottom-0.left-0.w-full {
  animation: story-loop 24s linear infinite;
}